
<!--Script for drop animation and saving results to db-->
<script th:inline="javascript">

    $(".droppable").droppable({
        drop: function (event, ui) {

            /*Appending dragged div to droppable div*/
            $(this)
                .append(ui.helper.css({
                    position: 'relative',
                    left: '0px',
                    top: '0px',
                    transform: "rotate(0deg)"
                }));


            /*Updating status of stories and sending result*/
            /*<![CDATA[*/
            var stories = /*[[${stories}]]*/[];

            for (var i = 0; i < stories.length; i++) {

                var story = document.getElementById(stories[i].id);
                var status = story.parentElement.id.toUpperCase();

                stories[i].status.name = status;
            }

            /*]]>*/

            stories = JSON.stringify({
                'stories': stories
            });

            $.ajax({
                url: "http://localhost:8080/updateStories",
                type: 'POST',
                data: stories,
                dataType: "html",
                contentType: 'application/json',
                mimeType: 'application/json',
                success: function (data) {
                    console.log(data);
                    return false;
                }
            });

        }
    })
</script>


<!--Script for drag animation-->
<script>
    $(function () {

        $(".draggable").ready().draggable({
            containment: "#droppable",
            revert: "invalid",
            stack: ".draggable",
            drag: function (event, ui) {
                ui.helper.css({
                    transform: "rotate(6deg)"
                });
            }
        });
    });
</script>